import React, { createContext, useContext, useState } from 'react';

const translations = {
  en: {
    "files": "Files",
    "url": "URL", 
    "url.title": "Website Scraper",
    "url.description.note": "Note: ",
    "url.description.cors": "Most websites have CORS restrictions and cannot be accessed directly.",
    "url.description.suggestion": "Suggestion: ",
    "url.description.recommend": "Use the bookmarklet tool below for reliable content extraction!",
    "url.bookmarklet.title": "One-Click Content Extraction Bookmarklet",
    "url.bookmarklet.description": "Drag the link below to your browser bookmarks bar, then click it on any webpage to extract content:",
    "url.bookmarklet.link": "Extract Web Content",
    "url.bookmarklet.instructions": "How to use:",
    "url.bookmarklet.step1": "Right-click the \"Extract Web Content\" link above â†’ Select \"Add to Bookmarks Bar\"",
    "url.bookmarklet.step2": "Open the webpage you want to extract (e.g., news articles, blogs, documentation)",
    "url.bookmarklet.step3": "Click the \"Extract Web Content\" bookmark in your bookmarks bar",
    "url.bookmarklet.step4": "A new window will pop up showing the extracted content, which you can copy or download",
    "url.bookmarklet.step5": "Paste the content into this site's file function for processing",
    "url.bookmarklet.defaultTitle": "Web Content",
    "url.bookmarklet.sourceUrl": "Source URL",
    "url.bookmarklet.captureTime": "Capture Time",
    "url.bookmarklet.success": "Content Extracted Successfully",
    "url.bookmarklet.instruction": "Content has been extracted. Please copy the text below:",
    "url.bookmarklet.copied": "Copied to clipboard!",
    "url.bookmarklet.copyBtn": "ðŸ“‹ Copy Content",
    "url.bookmarklet.downloadBtn": "ðŸ’¾ Download File",
    "url.bookmarklet.closeBtn": "âŒ Close Window",
    "url.input.placeholder": "Enter website URL (e.g., https://example.com)",
    "url.fetch.button": "Fetch Content",
    "url.fetch.loading": "Fetching...",
    "input.url.required": "Please enter a URL",
    "input.url.invalid": "Please enter a valid URL",
    "files.sources.title": "Sources",
    "files.sources.clear": "Clear All",
    "files.upload.processor.title": "File Processor",
    "files.upload.processor.description": "Upload files, folders, or a ZIP archive. Text-based files within folders/ZIPs will be extracted.",
    "files.upload.processing": "Please wait while we process your files",
    "files.context.title": "Generated Context",
    "files.context.copy": "Copy Context",
    "files.context.download": "Download",
    "files.context.placeholder": "Processed context will appear here...",
    "files.context.copied": "Context copied to clipboard!",
    "files.context.copy.failed": "Failed to copy context. See console for details.",
    "files.context.nothing.copy": "Nothing to copy.",
    "files.context.nothing.download": "Nothing to download.",
    "files.upload.description": "Drag and drop files/folders here, or click to browse",
    "files.upload.browse": "Browse Files",
    "files.upload.loading": "Processing files...",
    "file.type.binary": "Binary",
    "file.type.config": "Config", 
    "file.type.ignored": "Ignored",
    "footer.text": "Context Builder - AI-powered code analysis tool",
    "content.truncated": "Content truncated",
    "content.truncated.length": "exceeds length limit",
    "error.fetch.failed": "âŒ Failed to fetch URL content",
    "error.fetch.cors": "The website {hostname} has CORS restrictions that prevent direct access.",
    "error.fetch.solutions": "ðŸ’¡ Here are some solutions:",
    "error.method.copy": "ðŸ“‹ Method 1: Manual Copy",
    "error.method.copy.step1": "â€¢ Open the webpage in your browser",
    "error.method.copy.step2": "â€¢ Select and copy the text content",
    "error.method.copy.step3": "â€¢ Create a new text file",
    "error.method.copy.step4": "â€¢ Paste the content and upload the file here",
    "error.method.save": "ðŸ’¾ Method 2: Save As HTML",
    "error.method.save.step1": "â€¢ Right-click on the webpage â†’ 'Save As'",
    "error.method.save.step2": "â€¢ Upload the saved HTML file here",
    "error.method.devtools": "ðŸ”§ Method 3: Developer Tools",
    "error.method.devtools.step1": "â€¢ Press F12 to open developer tools",
    "error.method.devtools.step2": "â€¢ Navigate to Console tab",
    "error.method.devtools.step3": "â€¢ Copy the page content using JavaScript",
    "error.cors.tip": "ðŸ’¡ Tip: Use the bookmarklet tool above for easier content extraction!",
    "error.network.title": "ðŸŒ Network Error",
    "error.general.message": "Error: {error}",
    "error.network.check": "Please check:",
    "error.network.connection": "â€¢ Internet connection",
    "error.network.url": "â€¢ URL correctness",
    "error.network.vpn": "â€¢ VPN or proxy settings",
    "error.network.suggestion": "ðŸ’¡ Suggestion: Try using the bookmarklet tool for more reliable access.",
    "error.404.title": "ðŸ” Page Not Found (404)",
    "error.404.message": "The requested page could not be found.",
    "error.404.check": "Please check:",
    "error.404.url.complete": "â€¢ URL is complete and correct",
    "error.404.moved": "â€¢ Page hasn't been moved or deleted",
    "error.404.login": "â€¢ You don't need to login to access the page",
    "error.general.title": "âš ï¸ Fetch Error",
    "error.general.reasons": "Possible reasons:",
    "error.general.server": "â€¢ Server error or maintenance",
    "error.general.format": "â€¢ Unsupported content format",
    "error.general.permission": "â€¢ Access permission required",
    "error.general.blocked": "â€¢ Content blocked by security policy",
    "error.general.suggestion": "ðŸ’¡ Suggestion: Try alternative methods or use the bookmarklet tool."
  },
  zh: {
    "files": "æ–‡ä»¶",
    "url": "ç½‘å€",
    "url.title": "ç½‘é¡µæŠ“å–å™¨",
    "url.description.note": "æ³¨æ„ï¼š",
    "url.description.cors": "å¤§å¤šæ•°ç½‘ç«™éƒ½æœ‰CORSé™åˆ¶ï¼Œæ— æ³•ç›´æŽ¥è®¿é—®ã€‚",
    "url.description.suggestion": "å»ºè®®ï¼š",
    "url.description.recommend": "ä½¿ç”¨ä¸‹é¢çš„ä¹¦ç­¾å·¥å…·è¿›è¡Œå¯é çš„å†…å®¹æå–ï¼",
    "url.bookmarklet.title": "ä¸€é”®å†…å®¹æå–ä¹¦ç­¾å·¥å…·",
    "url.bookmarklet.description": "å°†ä¸‹é¢çš„é“¾æŽ¥æ‹–æ‹½åˆ°æµè§ˆå™¨ä¹¦ç­¾æ ï¼Œç„¶åŽåœ¨ä»»ä½•ç½‘é¡µä¸Šç‚¹å‡»å®ƒæ¥æå–å†…å®¹ï¼š",
    "url.bookmarklet.link": "æå–ç½‘é¡µå†…å®¹",
    "url.bookmarklet.instructions": "ä½¿ç”¨æ–¹æ³•ï¼š",
    "url.bookmarklet.step1": "å³é”®ç‚¹å‡»ä¸Šé¢çš„\"æå–ç½‘é¡µå†…å®¹\"é“¾æŽ¥ â†’ é€‰æ‹©\"æ·»åŠ åˆ°ä¹¦ç­¾æ \"",
    "url.bookmarklet.step2": "æ‰“å¼€æ‚¨æƒ³è¦æå–çš„ç½‘é¡µï¼ˆå¦‚æ–°é—»æ–‡ç« ã€åšå®¢ã€æ–‡æ¡£ç­‰ï¼‰",
    "url.bookmarklet.step3": "ç‚¹å‡»ä¹¦ç­¾æ ä¸­çš„\"æå–ç½‘é¡µå†…å®¹\"ä¹¦ç­¾",
    "url.bookmarklet.step4": "å°†å¼¹å‡ºä¸€ä¸ªæ–°çª—å£æ˜¾ç¤ºæå–çš„å†…å®¹ï¼Œæ‚¨å¯ä»¥å¤åˆ¶æˆ–ä¸‹è½½",
    "url.bookmarklet.step5": "å°†å†…å®¹ç²˜è´´åˆ°æœ¬ç«™çš„æ–‡ä»¶åŠŸèƒ½ä¸­è¿›è¡Œå¤„ç†",
    "url.bookmarklet.defaultTitle": "ç½‘é¡µå†…å®¹",
    "url.bookmarklet.sourceUrl": "æ¥æºç½‘å€",
    "url.bookmarklet.captureTime": "èŽ·å–æ—¶é—´",
    "url.bookmarklet.success": "å†…å®¹æå–æˆåŠŸ",
    "url.bookmarklet.instruction": "å†…å®¹å·²æå–å®Œæˆï¼Œè¯·å¤åˆ¶ä¸‹é¢çš„æ–‡æœ¬ï¼š",
    "url.bookmarklet.copied": "å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼",
    "url.bookmarklet.copyBtn": "ðŸ“‹ å¤åˆ¶å†…å®¹",
    "url.bookmarklet.downloadBtn": "ðŸ’¾ ä¸‹è½½æ–‡ä»¶",
    "url.bookmarklet.closeBtn": "âŒ å…³é—­çª—å£",
    "url.input.placeholder": "è¾“å…¥ç½‘ç«™URLï¼ˆå¦‚ï¼šhttps://example.comï¼‰",
    "url.fetch.button": "èŽ·å–å†…å®¹",
    "url.fetch.loading": "æ­£åœ¨èŽ·å–...",
    "input.url.required": "è¯·è¾“å…¥URL",
    "input.url.invalid": "è¯·è¾“å…¥æœ‰æ•ˆçš„URL",
    "files.sources.title": "æºæ–‡ä»¶",
    "files.sources.clear": "æ¸…ç©ºæ‰€æœ‰",
    "files.upload.processor.title": "æ–‡ä»¶å¤„ç†å™¨",
    "files.upload.processor.description": "ä¸Šä¼ æ–‡ä»¶ã€æ–‡ä»¶å¤¹æˆ–ZIPåŽ‹ç¼©åŒ…ã€‚æ–‡ä»¶å¤¹/ZIPå†…çš„æ–‡æœ¬æ–‡ä»¶å°†è¢«æå–ã€‚",
    "files.upload.processing": "æ­£åœ¨å¤„ç†æ‚¨çš„æ–‡ä»¶ï¼Œè¯·ç¨å€™",
    "files.context.title": "ç”Ÿæˆçš„ä¸Šä¸‹æ–‡",
    "files.context.copy": "å¤åˆ¶ä¸Šä¸‹æ–‡",
    "files.context.download": "ä¸‹è½½",
    "files.context.placeholder": "å¤„ç†åŽçš„ä¸Šä¸‹æ–‡å°†åœ¨æ­¤æ˜¾ç¤º...",
    "files.context.copied": "ä¸Šä¸‹æ–‡å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼",
    "files.context.copy.failed": "å¤åˆ¶å¤±è´¥ã€‚è¯·æŸ¥çœ‹æŽ§åˆ¶å°äº†è§£è¯¦æƒ…ã€‚",
    "files.context.nothing.copy": "æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹ã€‚",
    "files.context.nothing.download": "æ²¡æœ‰å¯ä¸‹è½½çš„å†…å®¹ã€‚",
    "files.upload.description": "å°†æ–‡ä»¶/æ–‡ä»¶å¤¹æ‹–æ‹½åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»æµè§ˆ",
    "files.upload.browse": "æµè§ˆæ–‡ä»¶",
    "files.upload.loading": "æ­£åœ¨å¤„ç†æ–‡ä»¶...",
    "file.type.binary": "äºŒè¿›åˆ¶",
    "file.type.config": "é…ç½®",
    "file.type.ignored": "å¿½ç•¥", 
    "footer.text": "ä¸Šä¸‹æ–‡æž„å»ºå™¨ - AIé©±åŠ¨çš„ä»£ç åˆ†æžå·¥å…·",
    "content.truncated": "å†…å®¹å·²æˆªæ–­",
    "content.truncated.length": "è¶…å‡ºé•¿åº¦é™åˆ¶",
    "error.fetch.failed": "âŒ èŽ·å–URLå†…å®¹å¤±è´¥",
    "error.fetch.cors": "ç½‘ç«™ {hostname} æœ‰CORSé™åˆ¶ï¼Œé˜»æ­¢ç›´æŽ¥è®¿é—®ã€‚",
    "error.fetch.solutions": "ðŸ’¡ ä»¥ä¸‹æ˜¯ä¸€äº›è§£å†³æ–¹æ¡ˆï¼š",
    "error.method.copy": "ðŸ“‹ æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨å¤åˆ¶",
    "error.method.copy.step1": "â€¢ åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è¯¥ç½‘é¡µ",
    "error.method.copy.step2": "â€¢ é€‰æ‹©å¹¶å¤åˆ¶æ–‡æœ¬å†…å®¹",
    "error.method.copy.step3": "â€¢ åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡æœ¬æ–‡ä»¶",
    "error.method.copy.step4": "â€¢ ç²˜è´´å†…å®¹å¹¶åœ¨æ­¤å¤„ä¸Šä¼ æ–‡ä»¶",
    "error.method.save": "ðŸ’¾ æ–¹æ³•äºŒï¼šå¦å­˜ä¸ºHTML",
    "error.method.save.step1": "â€¢ å³é”®ç‚¹å‡»ç½‘é¡µ â†’ \"å¦å­˜ä¸º\"",
    "error.method.save.step2": "â€¢ åœ¨æ­¤å¤„ä¸Šä¼ ä¿å­˜çš„HTMLæ–‡ä»¶",
    "error.method.devtools": "ðŸ”§ æ–¹æ³•ä¸‰ï¼šå¼€å‘è€…å·¥å…·",
    "error.method.devtools.step1": "â€¢ æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·",
    "error.method.devtools.step2": "â€¢ å¯¼èˆªåˆ°æŽ§åˆ¶å°æ ‡ç­¾",
    "error.method.devtools.step3": "â€¢ ä½¿ç”¨JavaScriptå¤åˆ¶é¡µé¢å†…å®¹",
    "error.cors.tip": "ðŸ’¡ æç¤ºï¼šä½¿ç”¨ä¸Šé¢çš„ä¹¦ç­¾å·¥å…·å¯ä»¥æ›´è½»æ¾åœ°æå–å†…å®¹ï¼",
    "error.network.title": "ðŸŒ ç½‘ç»œé”™è¯¯",
    "error.general.message": "é”™è¯¯ï¼š{error}",
    "error.network.check": "è¯·æ£€æŸ¥ï¼š",
    "error.network.connection": "â€¢ ç½‘ç»œè¿žæŽ¥",
    "error.network.url": "â€¢ URLæ­£ç¡®æ€§",
    "error.network.vpn": "â€¢ VPNæˆ–ä»£ç†è®¾ç½®",
    "error.network.suggestion": "ðŸ’¡ å»ºè®®ï¼šå°è¯•ä½¿ç”¨ä¹¦ç­¾å·¥å…·ä»¥èŽ·å¾—æ›´å¯é çš„è®¿é—®ã€‚",
    "error.404.title": "ðŸ” é¡µé¢æœªæ‰¾åˆ° (404)",
    "error.404.message": "è¯·æ±‚çš„é¡µé¢æ— æ³•æ‰¾åˆ°ã€‚",
    "error.404.check": "è¯·æ£€æŸ¥ï¼š",
    "error.404.url.complete": "â€¢ URLæ˜¯å¦å®Œæ•´æ­£ç¡®",
    "error.404.moved": "â€¢ é¡µé¢æ˜¯å¦å·²è¢«ç§»åŠ¨æˆ–åˆ é™¤",
    "error.404.login": "â€¢ æ˜¯å¦éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®é¡µé¢",
    "error.general.title": "âš ï¸ èŽ·å–é”™è¯¯",
    "error.general.reasons": "å¯èƒ½çš„åŽŸå› ï¼š",
    "error.general.server": "â€¢ æœåŠ¡å™¨é”™è¯¯æˆ–ç»´æŠ¤ä¸­",
    "error.general.format": "â€¢ ä¸æ”¯æŒçš„å†…å®¹æ ¼å¼",
    "error.general.permission": "â€¢ éœ€è¦è®¿é—®æƒé™",
    "error.general.blocked": "â€¢ å†…å®¹è¢«å®‰å…¨ç­–ç•¥é˜»æ­¢",
    "error.general.suggestion": "ðŸ’¡ å»ºè®®ï¼šå°è¯•å…¶ä»–æ–¹æ³•æˆ–ä½¿ç”¨ä¹¦ç­¾å·¥å…·ã€‚"
  }
};

const LanguageContext = createContext();

export const LanguageProvider = ({ children }) => {
  const [language, setLanguage] = useState(() => {
    const saved = localStorage.getItem('preferred-language');
    return saved || 'en';
  });
  
  const t = (key) => {
    return translations[language]?.[key] || translations.en?.[key] || key;
  };
  
  const switchLanguage = (newLang) => {
    setLanguage(newLang);
    localStorage.setItem('preferred-language', newLang);
  };
  
  return (
    <LanguageContext.Provider value={{ t, language, switchLanguage }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within LanguageProvider');
  }
  return context;
};