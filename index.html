<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Context Builder</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide-static@latest/dist/lucide.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1><i data-lucide="box-select"></i> LLM Context Builder</h1>
            <p>Prepare context for your Large Language Models, all in your browser.</p>
        </header>

        <main class="bento-grid">
            <div class="bento-box code-input-box">
                <div class="box-header">
                    <i data-lucide="file-code-2"></i>
                    <h2>Code Processor</h2>
                </div>
                <p class="box-description">Upload code files, folders, or a ZIP archive.</p>
                <div class="file-drop-area">
                    <i data-lucide="upload-cloud" class="upload-icon"></i>
                    <p>Drag & drop files here</p>
                    <p class="or-text">or</p>
                    <label for="file-upload" class="custom-file-upload">
                        <i data-lucide="file-plus"></i> Choose Files
                    </label>
                    <input type="file" id="file-upload" multiple webkitdirectory directory>
                </div>
                <div class="file-list-preview" style="display: none;">
                    <h4>Selected Files:</h4>
                    <ul>
                        </ul>
                </div>
            </div>

            <div class="bento-box url-input-box">
                <div class="box-header">
                    <i data-lucide="globe"></i>
                    <h2>Website Scraper</h2>
                </div>
                <p class="box-description">Enter a URL to fetch its content.</p>
                <div class="url-input-group">
                    <input type="url" id="url-input" placeholder="https://example.com">
                    <button id="fetch-url-button">
                        <i data-lucide="arrow-right-circle"></i> Fetch
                    </button>
                </div>
                <div class="loading-indicator" style="display: none;">
                    <div class="spinner"></div>
                    <p>Fetching content...</p>
                </div>
            </div>

            <div class="bento-box context-output-box">
                <div class="box-header">
                    <i data-lucide="clipboard-check"></i>
                    <h2>Generated Context</h2>
                </div>
                <div class="context-controls">
                    <button id="copy-context-button">
                        <i data-lucide="copy"></i> Copy Context
                    </button>
                    <button id="clear-context-button" class="secondary">
                        <i data-lucide="trash-2"></i> Clear
                    </button>
                </div>
                <textarea id="context-display" placeholder="Processed context will appear here..." readonly></textarea>
            </div>

            <div class="bento-box settings-box">
                <div class="box-header">
                    <i data-lucide="sliders-horizontal"></i>
                    <h2>Options</h2>
                </div>
                <p class="box-description">Adjust processing parameters.</p>
                <div class="options-content">
                   <p class="coming-soon">More options coming soon!</p>
                </div>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 LLM Context Builder. Client-side power!</p>
        </footer>
    </div>

    <script>
        lucide.createIcons(); // Initialize Lucide icons

        // Basic interactivity for file input (visual only for now)
        const fileUpload = document.getElementById('file-upload');
        const fileDropArea = document.querySelector('.file-drop-area');
        const fileListPreview = document.querySelector('.file-list-preview ul');
        const fileListContainer = document.querySelector('.file-list-preview');

        fileUpload.addEventListener('change', (event) => {
            handleFiles(event.target.files);
        });

        fileDropArea.addEventListener('dragover', (event) => {
            event.preventDefault();
            fileDropArea.classList.add('dragover');
        });

        fileDropArea.addEventListener('dragleave', () => {
            fileDropArea.classList.remove('dragover');
        });

        fileDropArea.addEventListener('drop', (event) => {
            event.preventDefault();
            fileDropArea.classList.remove('dragover');
            handleFiles(event.dataTransfer.files);
        });

        function handleFiles(files) {
            if (files.length === 0) {
                fileListContainer.style.display = 'none';
                return;
            }
            fileListPreview.innerHTML = ''; // Clear previous list
            for (const file of files) {
                const listItem = document.createElement('li');
                listItem.textContent = `${file.name} (${(file.size / 1024).toFixed(2)} KB)`;
                fileListPreview.appendChild(listItem);
            }
            fileListContainer.style.display = 'block';
        }

        // Placeholder for URL fetch feedback
        const fetchUrlButton = document.getElementById('fetch-url-button');
        const loadingIndicator = document.querySelector('.loading-indicator');
        const urlInput = document.getElementById('url-input');

        fetchUrlButton.addEventListener('click', () => {
            if (urlInput.value) {
                loadingIndicator.style.display = 'flex';
                // Simulate network request
                setTimeout(() => {
                    loadingIndicator.style.display = 'none';
                    // In a real app, you'd process the URL here
                    document.getElementById('context-display').value = `Fetched content from: ${urlInput.value}\n\n(Actual content fetching needs JavaScript implementation beyond this demo.)`;
                }, 2000);
            } else {
                alert("Please enter a URL.");
            }
        });

        // Placeholder for copy and clear
        const copyButton = document.getElementById('copy-context-button');
        const clearButton = document.getElementById('clear-context-button');
        const contextDisplay = document.getElementById('context-display');

        copyButton.addEventListener('click', () => {
            if(contextDisplay.value) {
                navigator.clipboard.writeText(contextDisplay.value)
                    .then(() => alert("Context copied to clipboard!"))
                    .catch(err => console.error('Failed to copy: ', err));
            }
        });

        clearButton.addEventListener('click', () => {
            contextDisplay.value = '';
            urlInput.value = '';
            handleFiles([]); // Clear file list
        });

    </script>
</body>
</html>